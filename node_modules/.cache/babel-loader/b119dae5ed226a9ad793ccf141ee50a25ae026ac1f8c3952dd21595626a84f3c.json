{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Routes,Route,useLocation}from\"react-router-dom\";import{auth}from\"../firebase\";import{setPersistence,browserLocalPersistence}from\"firebase/auth\";import Navbar from\"./Navbar\";import PublicLanding from\"../pages/PublicLanding\";import PrivateHome from\"../pages/PrivateHome\";import BookList from\"../pages/BookList\";import BookDetails from\"../pages/BookDetails\";import AddBook from\"../pages/AddBook\";import Profile from\"../pages/Profile\";import ChooseUsername from\"../pages/ChooseUsername\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function AppWrapper(){const[user,setUser]=useState(null);const[authChecked,setAuthChecked]=useState(false);const location=useLocation();useEffect(()=>{// Set persistence BEFORE checking auth state\nsetPersistence(auth,browserLocalPersistence).then(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{setUser(currentUser);setAuthChecked(true);});return unsubscribe;}).catch(error=>{console.error(\"Failed to set persistence:\",error);setAuthChecked(true);// Still proceed to render app\n});},[]);const showNavbar=user&&location.pathname!==\"/\";if(!authChecked){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[showNavbar&&/*#__PURE__*/_jsx(Navbar,{user:user}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PublicLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/choose-username\",element:/*#__PURE__*/_jsx(ChooseUsername,{})}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(PrivateHome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/books\",element:/*#__PURE__*/_jsx(BookList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/books/:id\",element:/*#__PURE__*/_jsx(BookDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(AddBook,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})})]})]})]});}export default AppWrapper;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useLocation","auth","setPersistence","browserLocalPersistence","Navbar","PublicLanding","PrivateHome","BookList","BookDetails","AddBook","Profile","ChooseUsername","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AppWrapper","user","setUser","authChecked","setAuthChecked","location","then","unsubscribe","onAuthStateChanged","currentUser","catch","error","console","showNavbar","pathname","className","children","path","element"],"sources":["/Users/julineeerdekens/Desktop/bookclub/src/components/AppWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useLocation } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\nimport { setPersistence, browserLocalPersistence } from \"firebase/auth\";\n\nimport Navbar from \"./Navbar\";\nimport PublicLanding from \"../pages/PublicLanding\";\nimport PrivateHome from \"../pages/PrivateHome\";\nimport BookList from \"../pages/BookList\";\nimport BookDetails from \"../pages/BookDetails\";\nimport AddBook from \"../pages/AddBook\";\nimport Profile from \"../pages/Profile\";\nimport ChooseUsername from \"../pages/ChooseUsername\";\n\nfunction AppWrapper() {\n  const [user, setUser] = useState(null);\n  const [authChecked, setAuthChecked] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    // Set persistence BEFORE checking auth state\n    setPersistence(auth, browserLocalPersistence)\n      .then(() => {\n        const unsubscribe = auth.onAuthStateChanged((currentUser) => {\n          setUser(currentUser);\n          setAuthChecked(true);\n        });\n        return unsubscribe;\n      })\n      .catch((error) => {\n        console.error(\"Failed to set persistence:\", error);\n        setAuthChecked(true); // Still proceed to render app\n      });\n  }, []);\n\n  const showNavbar = user && location.pathname !== \"/\";\n\n  if (!authChecked) {\n    return <div className=\"text-center mt-5\">Loading...</div>;\n  }\n\n  return (\n    <>\n      {showNavbar && <Navbar user={user} />}\n\n      <Routes>\n        <Route path=\"/\" element={<PublicLanding />} />\n        <Route path=\"/choose-username\" element={<ChooseUsername />} />\n        {user && (\n          <>\n            <Route path=\"/home\" element={<PrivateHome />} />\n            <Route path=\"/books\" element={<BookList />} />\n            <Route path=\"/books/:id\" element={<BookDetails />} />\n            <Route path=\"/add\" element={<AddBook />} />\n            <Route path=\"/profile\" element={<Profile />} />\n          </>\n        )}\n      </Routes>\n    </>\n  );\n}\n\nexport default AppWrapper;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}