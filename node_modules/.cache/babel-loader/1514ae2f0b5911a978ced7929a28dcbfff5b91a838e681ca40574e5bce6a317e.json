{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{auth,db}from\"../firebase\";import{doc,getDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(){const[user,setUser]=useState(null);const[username,setUsername]=useState(\"\");useEffect(()=>{const unsubscribe=auth.onAuthStateChanged(async currentUser=>{var _currentUser$provider;if(!currentUser){setUser(null);return;}setUser(currentUser);const provider=(_currentUser$provider=currentUser.providerData[0])===null||_currentUser$provider===void 0?void 0:_currentUser$provider.providerId;if(provider===\"google.com\"){setUsername(currentUser.displayName||\"Google User\");}else{try{const userDoc=await getDoc(doc(db,\"users\",currentUser.uid));if(userDoc.exists()){const data=userDoc.data();setUsername(data.username||\"User\");}else{setUsername(\"User\");}}catch(err){console.error(\"Error fetching username:\",err);setUsername(\"User\");}}});return()=>unsubscribe();},[]);const handleSignOut=async()=>{try{await auth.signOut();}catch(error){console.error(\"Sign-out error:\",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"\\uD83D\\uDC64 Your Profile\"}),user?/*#__PURE__*/_jsxs(_Fragment,{children:[user.photoURL&&/*#__PURE__*/_jsx(\"img\",{src:user.photoURL,alt:\"User avatar\",className:\"profile-avatar\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",username]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",user.email]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger mt-3\",onClick:handleSignOut,children:\"Sign Out\"})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"You\\u2019re not signed in. Please log in to view your profile.\"})]})});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","auth","db","doc","getDoc","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","user","setUser","username","setUsername","unsubscribe","onAuthStateChanged","currentUser","_currentUser$provider","provider","providerData","providerId","displayName","userDoc","uid","exists","data","err","console","error","handleSignOut","signOut","className","children","photoURL","src","alt","email","onClick"],"sources":["/Users/julineeerdekens/Desktop/bookclub/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { auth, db } from \"../firebase\";\nimport { doc, getDoc } from \"firebase/firestore\";\n\nfunction Profile() {\n  const [user, setUser] = useState(null);\n  const [username, setUsername] = useState(\"\");\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\n      if (!currentUser) {\n        setUser(null);\n        return;\n      }\n\n      setUser(currentUser);\n\n      const provider = currentUser.providerData[0]?.providerId;\n\n      if (provider === \"google.com\") {\n        setUsername(currentUser.displayName || \"Google User\");\n      } else {\n        try {\n          const userDoc = await getDoc(doc(db, \"users\", currentUser.uid));\n          if (userDoc.exists()) {\n            const data = userDoc.data();\n            setUsername(data.username || \"User\");\n          } else {\n            setUsername(\"User\");\n          }\n        } catch (err) {\n          console.error(\"Error fetching username:\", err);\n          setUsername(\"User\");\n        }\n      }\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleSignOut = async () => {\n    try {\n      await auth.signOut();\n    } catch (error) {\n      console.error(\"Sign-out error:\", error);\n    }\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"profile-card\">\n        <h2 className=\"mb-4\">ðŸ‘¤ Your Profile</h2>\n        {user ? (\n          <>\n            {user.photoURL && (\n              <img src={user.photoURL} alt=\"User avatar\" className=\"profile-avatar\" />\n            )}\n            <p><strong>Name:</strong> {username}</p>\n            <p><strong>Email:</strong> {user.email}</p>\n            <button className=\"btn btn-outline-danger mt-3\" onClick={handleSignOut}>\n              Sign Out\n            </button>\n          </>\n        ) : (\n          <p className=\"text-muted\">Youâ€™re not signed in. Please log in to view your profile.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}