{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Routes,Route,useLocation}from\"react-router-dom\";import{auth}from\"../firebase\";import Navbar from\"./Navbar\";import PublicLanding from\"../pages/PublicLanding\";import PrivateHome from\"../pages/PrivateHome\";import BookList from\"../pages/BookList\";import BookDetails from\"../pages/BookDetails\";import AddBook from\"../pages/AddBook\";import Profile from\"../pages/Profile\";import ChooseUsername from\"../pages/ChooseUsername\";import{setPersistence,browserLocalPersistence}from\"firebase/auth\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function AppWrapper(){const[user,setUser]=useState(null);const[authChecked,setAuthChecked]=useState(false);const location=useLocation();useEffect(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{setUser(currentUser);setAuthChecked(true);});return()=>unsubscribe();},[]);useEffect(()=>{setPersistence(auth,browserLocalPersistence).then(()=>{const unsubscribe=auth.onAuthStateChanged(currentUser=>{setUser(currentUser);setAuthChecked(true);});return()=>unsubscribe();}).catch(error=>{console.error(\"Auth persistence error:\",error);});},[]);const showNavbar=user&&location.pathname!==\"/\";if(!authChecked){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[showNavbar&&/*#__PURE__*/_jsx(Navbar,{user:user}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PublicLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/choose-username\",element:/*#__PURE__*/_jsx(ChooseUsername,{})}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(PrivateHome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/books\",element:/*#__PURE__*/_jsx(BookList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/books/:id\",element:/*#__PURE__*/_jsx(BookDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/add\",element:/*#__PURE__*/_jsx(AddBook,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})})]})]})]});}export default AppWrapper;","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","useLocation","auth","Navbar","PublicLanding","PrivateHome","BookList","BookDetails","AddBook","Profile","ChooseUsername","setPersistence","browserLocalPersistence","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AppWrapper","user","setUser","authChecked","setAuthChecked","location","unsubscribe","onAuthStateChanged","currentUser","then","catch","error","console","showNavbar","pathname","className","children","path","element"],"sources":["/Users/julineeerdekens/Desktop/bookclub/src/components/AppWrapper.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useLocation } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\n\nimport Navbar from \"./Navbar\";\nimport PublicLanding from \"../pages/PublicLanding\";\nimport PrivateHome from \"../pages/PrivateHome\";\nimport BookList from \"../pages/BookList\";\nimport BookDetails from \"../pages/BookDetails\";\nimport AddBook from \"../pages/AddBook\";\nimport Profile from \"../pages/Profile\";\nimport ChooseUsername from \"../pages/ChooseUsername\";\nimport { setPersistence, browserLocalPersistence } from \"firebase/auth\";\n\n\n\nfunction AppWrapper() {\n  const [user, setUser] = useState(null);\n  const [authChecked, setAuthChecked] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged((currentUser) => {\n      setUser(currentUser);\n      setAuthChecked(true);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n  setPersistence(auth, browserLocalPersistence)\n    .then(() => {\n      const unsubscribe = auth.onAuthStateChanged((currentUser) => {\n        setUser(currentUser);\n        setAuthChecked(true);\n      });\n      return () => unsubscribe();\n    })\n    .catch((error) => {\n      console.error(\"Auth persistence error:\", error);\n    });\n}, []);\n\n  const showNavbar = user && location.pathname !== \"/\";\n\n  if (!authChecked) {\n    return <div className=\"text-center mt-5\">Loading...</div>;\n  }\n\n  return (\n    <>\n      {showNavbar && <Navbar user={user} />}\n\n      <Routes>\n        <Route path=\"/\" element={<PublicLanding />} />\n        <Route path=\"/choose-username\" element={<ChooseUsername />} />\n        {user && (\n          <>\n            <Route path=\"/home\" element={<PrivateHome />} />\n            <Route path=\"/books\" element={<BookList />} />\n            <Route path=\"/books/:id\" element={<BookDetails />} />\n            <Route path=\"/add\" element={<AddBook />} />\n            <Route path=\"/profile\" element={<Profile />} />\n          </>\n        )}\n      </Routes>\n    </>\n  );\n}\nexport default AppWrapper;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}